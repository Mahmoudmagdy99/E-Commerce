<header class="w-full bg-white shadow-md border-b">
  <div class="max-w-screen-2xl mx-auto px-4 py-3 flex items-center justify-between">
    <!-- Logo -->
    <a routerLink="/" class="flex items-center">
      <img src="/images/logo.png" alt="app logo" class="h-10 md:h-16" />
    </a>

    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center gap-8 uppercase text-sm md:text-lg font-medium">
      <a
        routerLink="/"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        class="hover:text-blue-600 transition"
        >Home</a
      >

      <a routerLink="/shop" routerLinkActive="active" class="hover:text-blue-600 transition"
        >Shop</a
      >

      <a routerLink="/test-error" routerLinkActive="active" class="hover:text-blue-600 transition"
        >Errors</a
      >
    </nav>

    <!-- Right Section -->
    <div class="flex items-center gap-4">
      <!-- Cart -->
      <a
        routerLink="/cart"
        routerLinkActive="active"
        matBadge="{{ cartService.itemCount() }}"
        matBadgeSize="large"
        class="custom-badge"
      >
        <mat-icon class="text-3xl">shopping_cart</mat-icon>
      </a>

      <!-- Desktop Auth Buttons -->
      <div class="hidden md:flex items-center gap-3 uppercase text-sm">
        <button mat-stroked-button class="px-3 py-1">Login</button>
        <button mat-stroked-button class="px-3 py-1">Register</button>
      </div>

      <!-- Mobile Menu Button -->
      <button mat-icon-button class="md:hidden" (click)="toggleMenu()" aria-label="Open menu">
        <mat-icon>{{ isOpen ? 'close' : 'menu' }}</mat-icon>
      </button>
    </div>
  </div>

  <!-- Mobile Nav -->
  @if(isOpen){
  <div class="md:hidden px-4 pb-4 animate-slide-down">
    <nav class="flex flex-col gap-2 uppercase text-sm">
      <a
        routerLink="/"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        class="py-2 px-3 rounded hover:bg-gray-100 transition"
        >Home</a
      >

      <a
        routerLink="/shop"
        routerLinkActive="active"
        class="py-2 px-3 rounded hover:bg-gray-100 transition"
        >Shop</a
      >

      <a
        routerLink="/test-error"
        routerLinkActive="active"
        class="py-2 px-3 rounded hover:bg-gray-100 transition"
        >Errors</a
      >
    </nav>

    <!-- Mobile Auth Buttons -->
    <div class="flex flex-col sm:flex-row gap-3 mt-4">
      <button mat-stroked-button class="w-full px-3 py-2">Login</button>
      <button mat-stroked-button class="w-full px-3 py-2">Register</button>
    </div>
  </div>
  }
</header>

@if(busyService.loading){
<mat-progress-bar class="fixed top-0.3 left-0 z-50" mode="indeterminate"></mat-progress-bar>
}
